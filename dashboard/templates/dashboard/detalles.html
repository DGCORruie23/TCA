{% extends "base/base.html" %}

{% load static %}

{% block title %}Detalles{% endblock title %}

{% block content %}
<h1>Detalles del Registro</h1>

<!-- Información del registro -->
<div>
    <h2>Registro: {{ registro.idRegistro }}</h2>
    <p>Fecha de inicio: {{ registro.fecha_inicio }}</p>
    <p>Fecha de término: {{ registro.fecha_termino }}</p>
    <p>Estado: {{ registro.get_estado_display }}</p>
</div>

<!-- Chat -->
<div id="chat">
    <h2>Chat</h2>
    <div id="chat-window">
        {% for message in messages %}
        <div class="message">
            <strong>{{ message.sender.username }}</strong>: {{ message.content }}
            {% for attachment in message.attachments.all %}
            <div class="attachment">
                <a href="{{ attachment.file.url }}">{{ attachment.file.name }}</a>
            </div>
            {% endfor %}
        </div>
        {% endfor %}
    </div>

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ message_form.as_p }}
        {{ attachment_form.as_p }}
        <button type="submit">Enviar</button>
    </form>
</div>
{% endblock %}
